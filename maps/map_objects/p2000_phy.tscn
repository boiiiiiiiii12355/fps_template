[gd_scene format=3 uid="uid://bly1cw0xtom6u"]

[ext_resource type="PackedScene" uid="uid://c5b5yy7ua3a7l" path="res://model/object_gltf/P2000.glb" id="1_138c2"]
[ext_resource type="AudioStream" uid="uid://cd5xx4ei7iese" path="res://sounds/gunshots/gun_shot.wav" id="3_j8x68"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_pceya"]
bounce = 0.2

[sub_resource type="BoxShape3D" id="BoxShape3D_sfpw3"]
size = Vector3(0.03482422, 0.10380176, 0.14506873)

[sub_resource type="BoxShape3D" id="BoxShape3D_j8x68"]
size = Vector3(0.16627441, 0.14251074, 0.22193506)

[node name="P2000" unique_id=1619057135 node_paths=PackedStringArray("gun_shot_sound", "weapon_model", "muzzle_flash", "gun_ray", "fire_rate_timer", "animation_player", "ejection_area", "equip_timer", "pickup_area") groups=["pickable"] instance=ExtResource("1_138c2")]
collision_layer = 4
mass = 1.4
physics_material_override = SubResource("PhysicsMaterial_pceya")
gun_shot_sound = NodePath("gunshot")
weapon_model = NodePath("gun_rig")
muzzle_flash = NodePath("muzzle_flash")
gun_ray = NodePath("gun_ray")
fire_rate_timer = NodePath("fire_rate")
mag_size = 12
base_damage = 20
animation_player = NodePath("AnimationPlayer")
chest_twist_offset = -0.505
ejection_area = NodePath("ejection_area")
equip_timer = NodePath("equip_timer")
pickup_area = NodePath("pickup_area")

[node name="gun_rig" parent="." index="0" unique_id=228519768]
transform = Transform3D(0.068, 0, 0, 0, 0.068, 0, 0, 0, 0.068, 0, 0, 0)

[node name="Skeleton3D" parent="gun_rig" index="0" unique_id=293251928]
bones/0/position = Vector3(0.00018059462, -0.00016433, 0.036912233)
bones/1/position = Vector3(-2.3097868, -5.4566736, 3.175917)
bones/1/rotation = Quaternion(-0.10254205, -0.20324728, -0.1653204, 0.95960665)
bones/2/position = Vector3(-0.15201798, 1.2581453, -0.09536795)
bones/3/rotation = Quaternion(0.99384123, -0.017590871, -0.0034611314, 0.10935372)
bones/4/rotation = Quaternion(0.25796872, 4.6850437e-07, 7.612797e-08, 0.9661533)

[node name="Bone_001" parent="gun_rig/Skeleton3D" index="0" unique_id=2001404132]
transform = Transform3D(0.8627193, 0.35896784, -0.35617045, -0.27560228, 0.9243085, 0.26400188, 0.4239796, -0.1295981, 0.8963513, -2.309607, -5.456838, 3.2128286)

[node name="Bone_002" parent="gun_rig/Skeleton3D" index="1" unique_id=993456630]
transform = Transform3D(1, 5.9566077e-09, -2.3841855e-07, 2.3833724e-07, 0.011160552, 0.99993765, 8.617121e-09, -0.99993765, 0.011160552, -0.15183735, 1.2579811, -0.058455758)

[node name="Bone_003" parent="gun_rig/Skeleton3D" index="2" unique_id=471037133]
transform = Transform3D(0.99935716, -0.034208138, -0.010726634, -0.03572204, -0.9754646, -0.21723835, -0.0030321374, 0.2174822, -0.9760582, 0.1525889, 0.8745132, -0.13155767)

[node name="Bone_004" parent="gun_rig/Skeleton3D" index="3" unique_id=1069104778]
transform = Transform3D(1, -2.4229273e-08, 7.3788516e-07, 3.888215e-07, 0.8669042, -0.49847463, -6.275981e-07, 0.4984746, 0.86690426, -0.26450828, 0.94002306, 0.52700305)

[node name="Bone" parent="gun_rig/Skeleton3D" index="4" unique_id=807492373]
transform = Transform3D(1, 0, -2.3841858e-07, 0, 1, 0, 2.3841858e-07, 0, 1, 0.00018059462, -0.00016433, 0.036912233)

[node name="muzzle_flash" type="OmniLight3D" parent="." index="2" unique_id=1011751023]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.071633734, -0.08512558)
light_color = Color(1, 0.6627451, 0, 1)
light_size = 0.032
shadow_enabled = true
omni_range = 0.0
omni_attenuation = 2.0

[node name="item_light" type="OmniLight3D" parent="." index="3" unique_id=1842546099]
light_energy = 0.001
light_size = 0.284
shadow_enabled = true
omni_range = 0.197

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="4" unique_id=1993214725]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.001171546, 0.0487378, -0.007067099)
shape = SubResource("BoxShape3D_sfpw3")

[node name="gun_ray" type="RayCast3D" parent="." index="5" unique_id=2069764647]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.07260685, -0.08016728)
target_position = Vector3(0, 0, -1000)
collision_mask = 13

[node name="pickup_area" type="Area3D" parent="." index="6" unique_id=1412736532]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.011259437, 0.040984385, -0.07206045)
collision_layer = 4
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="pickup_area" index="0" unique_id=35949339]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.012658648, 0.009125024, 0.061645202)
shape = SubResource("BoxShape3D_j8x68")

[node name="equip_timer" type="Timer" parent="." index="7" unique_id=1667584406]
one_shot = true

[node name="fire_rate" type="Timer" parent="." index="8" unique_id=363556102]
wait_time = 0.1
one_shot = true

[node name="ejection_area" type="Node3D" parent="." index="9" unique_id=924834727]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.01085791, 0.0838889, -0.014353819)

[node name="ejection_dir" type="Node3D" parent="ejection_area" index="0" unique_id=652975480]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.012261778, 0.010846984, 0)

[node name="gunshot" type="AudioStreamPlayer3D" parent="." index="10" unique_id=300749854]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.010719381, -0.027113676)
stream = ExtResource("3_j8x68")
