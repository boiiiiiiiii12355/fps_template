[gd_scene load_steps=19 format=3 uid="uid://bfbuqtw1qjq77"]

[ext_resource type="PackedScene" uid="uid://b80vkxdyc415v" path="res://char_models/player_body.blend" id="1_pkeqm"]
[ext_resource type="Script" uid="uid://66lqec4wjkx4" path="res://Scripts/player_animations.gd" id="2_en67s"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_en67s"]
animation = &"idle"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_en67s"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8n0mu"]
animation = &"strafe_001"

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_qm4x0"]
graph_offset = Vector2(-353.8, 96.600006)
nodes/strafe/node = SubResource("AnimationNodeAnimation_8n0mu")
nodes/strafe/position = Vector2(-60, 120)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_en67s")
nodes/TimeScale/position = Vector2(120, 100)
node_connections = [&"output", 0, &"TimeScale", &"TimeScale", 0, &"strafe"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_74kp5"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qm4x0"]
animation = &"walk"

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_4d5fo"]
graph_offset = Vector2(-395, 116)
nodes/walk/node = SubResource("AnimationNodeAnimation_qm4x0")
nodes/walk/position = Vector2(-28, 158)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_74kp5")
nodes/TimeScale/position = Vector2(140, 120)
node_connections = [&"output", 0, &"TimeScale", &"TimeScale", 0, &"walk"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_74kp5"]
animation = &"walk"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_cd5m8"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_8n0mu"]
graph_offset = Vector2(-182, 91)
nodes/Animation/node = SubResource("AnimationNodeAnimation_74kp5")
nodes/Animation/position = Vector2(-38, 180)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_cd5m8")
nodes/TimeScale/position = Vector2(120, 120)
node_connections = [&"output", 0, &"TimeScale", &"TimeScale", 0, &"Animation"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_cd5m8"]
animation = &"strafe_001"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_8n0mu"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_k4ijd"]
graph_offset = Vector2(-423, 119)
nodes/Animation/node = SubResource("AnimationNodeAnimation_cd5m8")
nodes/Animation/position = Vector2(-160, 180)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_8n0mu")
nodes/TimeScale/position = Vector2(79, 142)
node_connections = [&"output", 0, &"TimeScale", &"TimeScale", 0, &"Animation"]

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_8n0mu"]
blend_point_0/node = SubResource("AnimationNodeAnimation_en67s")
blend_point_0/pos = Vector2(0, 0)
blend_point_1/node = SubResource("AnimationNodeBlendTree_qm4x0")
blend_point_1/pos = Vector2(1, 0)
blend_point_2/node = SubResource("AnimationNodeBlendTree_4d5fo")
blend_point_2/pos = Vector2(0, 1)
blend_point_3/node = SubResource("AnimationNodeBlendTree_8n0mu")
blend_point_3/pos = Vector2(0, -1)
blend_point_4/node = SubResource("AnimationNodeBlendTree_k4ijd")
blend_point_4/pos = Vector2(-1, 0)
sync = true

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_qm4x0"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_6nbey"]
states/End/position = Vector2(523, 100)
states/walk/node = SubResource("AnimationNodeBlendSpace2D_8n0mu")
states/walk/position = Vector2(359, 100)
transitions = ["Start", "walk", SubResource("AnimationNodeStateMachineTransition_qm4x0")]
graph_offset = Vector2(-128, 5)

[node name="player_body" node_paths=PackedStringArray("skeleton", "camera_point", "animation_tree", "chest_tracker") instance=ExtResource("1_pkeqm")]
script = ExtResource("2_en67s")
skeleton = NodePath("rig/Skeleton3D")
camera_point = NodePath("camera_point")
animation_tree = NodePath("AnimationTree")
chest_tracker = NodePath("rig/Skeleton3D/chest")

[node name="rig" parent="." index="0"]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="rig" index="0"]
bones/1/position = Vector3(0.010990959, -0.022679297, 1.5320009)
bones/1/rotation = Quaternion(0.77779204, -0.1455904, -0.11212031, 0.6010591)
bones/3/rotation = Quaternion(-0.242257, 0.061540455, 0.022317309, 0.9680012)
bones/4/rotation = Quaternion(0.08760598, 0.16232786, 0.02632886, 0.98248756)
bones/5/rotation = Quaternion(0.21733624, -0.11366492, 0.0036630898, 0.9694492)
bones/7/rotation = Quaternion(-0.16869393, -0.11195837, 0.019960914, 0.9790859)
bones/8/position = Vector3(0.3451548, 0.090449564, 1.9721794)
bones/8/rotation = Quaternion(-0.32061645, 0.31711638, -0.14777663, 0.8802298)
bones/8/scale = Vector3(1.0000001, 14.128685, 0.9999999)
bones/9/position = Vector3(-0.37753692, 0.032690804, 1.9679363)
bones/9/rotation = Quaternion(-0.26749465, -0.42296615, 0.23439267, 0.8334304)
bones/9/scale = Vector3(1.0000001, 14.128681, 0.9999998)
bones/10/position = Vector3(0.13696243, -0.44325638, 0.8995933)
bones/10/rotation = Quaternion(0.98359054, -0.14868316, 0.09555343, -0.03622759)
bones/10/scale = Vector3(0.9999999, 16.564297, 0.99999994)
bones/11/position = Vector3(-0.3159232, -0.024024585, 0.8503058)
bones/11/rotation = Quaternion(0.94334126, -0.20774567, 0.2571653, 0.028549446)
bones/11/scale = Vector3(0.99999994, 19.316858, 1)
bones/13/position = Vector3(0, -0.0040728883, -0.10847959)
bones/13/rotation = Quaternion(0.0013022874, -0.0005508169, -0.1837587, 0.98297036)
bones/15/rotation = Quaternion(0.032764886, 0.0048285048, 0.22590451, 0.9735863)
bones/26/rotation = Quaternion(0.94879276, 0.044441126, -0.061637484, 0.30662397)
bones/26/scale = Vector3(0.97636884, 0.97636914, 0.97636867)
bones/27/rotation = Quaternion(0.2781104, -3.3239235e-07, 7.359376e-08, 0.9605491)
bones/27/scale = Vector3(0.99970925, 0.99970925, 0.9997094)
bones/28/rotation = Quaternion(-0.51865166, -0.21523069, -0.04128983, 0.82642084)
bones/28/scale = Vector3(1.024495, 1.0244948, 1.0244936)
bones/29/position = Vector3(-1.1554574e-05, 0.2091989, -0.00025597695)
bones/29/rotation = Quaternion(0.00031162097, 0.97456485, -0.22409381, -0.0022761894)
bones/33/scale = Vector3(1.0244948, 1.0244945, 1.0244948)
bones/35/rotation = Quaternion(3.1499745e-08, -0.11682034, 7.972575e-09, 0.99315304)
bones/35/scale = Vector3(1.0244948, 1.0244945, 1.0244944)
bones/37/scale = Vector3(1.0242058, 1.0242058, 1.0242057)
bones/38/rotation = Quaternion(6.421461e-08, -0.003410203, 1.6064618e-08, 0.99999416)
bones/38/scale = Vector3(1.0242057, 1.024206, 1.0242059)
bones/40/rotation = Quaternion(0.9819422, -0.07428608, 0.061647587, 0.16269869)
bones/40/scale = Vector3(0.9805692, 0.98056906, 0.98056895)
bones/41/rotation = Quaternion(0.22076859, 3.1149497e-07, -4.4691813e-08, 0.97532624)
bones/41/scale = Vector3(0.9997872, 0.9997874, 0.9997873)
bones/42/rotation = Quaternion(-0.62809044, 0.005705243, -0.082956426, 0.77368474)
bones/42/scale = Vector3(1.0200619, 1.0200619, 1.0200611)
bones/43/position = Vector3(4.91727e-05, 0.20928621, -0.0002783809)
bones/43/rotation = Quaternion(-0.00050021353, 0.9768021, -0.21413949, 0.0013578039)
bones/47/scale = Vector3(1.0200619, 1.020062, 1.0200621)
bones/49/rotation = Quaternion(3.4288e-08, 0.00403655, -6.391424e-08, 0.99999183)
bones/49/scale = Vector3(1.0200617, 1.0200616, 1.0200611)
bones/51/scale = Vector3(1.0198538, 1.019854, 1.019854)
bones/52/rotation = Quaternion(1.332233e-07, 0.0055831107, -5.680363e-09, 0.99998444)
bones/52/scale = Vector3(1.0198536, 1.0198536, 1.0198537)
bones/60/rotation = Quaternion(0.0002959328, 0.9770927, -0.21280193, -0.0022821298)
bones/62/rotation = Quaternion(-0.7366503, -0.0765198, 0.015108961, 0.671761)
bones/63/rotation = Quaternion(-0.14003795, 0.002228095, 0.0003148292, 0.99014366)
bones/63/scale = Vector3(0.9763685, 0.97636855, 0.9763685)
bones/64/rotation = Quaternion(0.27811044, -3.2619826e-07, 7.275325e-08, 0.9605491)
bones/64/scale = Vector3(0.99970925, 0.9997093, 0.99970937)
bones/65/rotation = Quaternion(0.9483415, 0.042389058, -0.06798648, 0.30696842)
bones/67/rotation = Quaternion(0.9483414, 0.0423891, -0.067986466, 0.30696836)
bones/67/scale = Vector3(1.0120301, 0.97636837, 1.0120311)
bones/68/rotation = Quaternion(-5.1420297e-08, 0.0032878688, 2.6275224e-10, 0.99999464)
bones/69/rotation = Quaternion(0.27814907, 0.0032518127, -0.0009703057, 0.96053195)
bones/69/scale = Vector3(1.0001407, 0.98967093, 1.010833)
bones/70/rotation = Quaternion(-2.9296766e-08, -0.14718847, 5.1662945e-09, 0.98910844)
bones/71/rotation = Quaternion(-0.51909184, -0.08982986, 0.034675572, 0.8492772)
bones/71/scale = Vector3(0.9893197, 0.9950183, 1.0163288)
bones/72/rotation = Quaternion(0.00033713406, 0.97469646, -0.22352082, -0.002282636)
bones/72/scale = Vector3(0.99948514, 1.0007366, 0.9997737)
bones/81/rotation = Quaternion(-0.6506707, 0.098068446, 0.00852929, 0.7529526)
bones/82/rotation = Quaternion(-0.11075492, -0.0022363982, -0.0002490191, 0.9938453)
bones/82/scale = Vector3(0.9805689, 0.9805688, 0.9805689)
bones/83/rotation = Quaternion(0.22076859, 3.0771935e-07, -4.526323e-08, 0.9753263)
bones/83/scale = Vector3(0.9997872, 0.9997873, 0.99978715)
bones/84/rotation = Quaternion(0.981185, -0.0725889, 0.07247626, 0.16356686)
bones/86/rotation = Quaternion(0.98118496, -0.07258902, 0.07247629, 0.16356687)
bones/86/scale = Vector3(1.0098737, 0.9805691, 1.0098739)
bones/87/rotation = Quaternion(-3.6070578e-09, -0.0054359897, 9.912918e-09, 0.9999852)
bones/88/rotation = Quaternion(0.2208132, -0.0054227333, 0.0012428939, 0.9753003)
bones/88/scale = Vector3(1.0001035, 0.9940443, 1.0061854)
bones/89/rotation = Quaternion(-3.4704914e-08, 0.03510433, -1.0884998e-08, 0.99938375)
bones/90/rotation = Quaternion(-0.6246633, -0.020988304, -0.10700167, 0.7732438)
bones/90/scale = Vector3(0.99105954, 0.99022675, 1.0190994)
bones/91/rotation = Quaternion(-0.0006124975, 0.9769393, -0.213512, 0.0013829157)
bones/91/scale = Vector3(0.9997154, 1.0004117, 0.99987376)
bones/95/rotation = Quaternion(0.016506163, 0.0024732333, 0.113702506, 0.9933747)
bones/97/rotation = Quaternion(0.25235742, -0.05676769, -0.0046404977, 0.9659564)
bones/100/rotation = Quaternion(-0.5485663, 0.066386156, 0.092343286, 0.8283362)
bones/102/rotation = Quaternion(0.21733631, -0.113664955, 0.0036630824, 0.9694493)
bones/104/rotation = Quaternion(-0.16869386, -0.11195827, 0.019960871, 0.979086)
bones/105/rotation = Quaternion(-0.631127, -0.072752364, -0.08740854, 0.7672976)
bones/107/rotation = Quaternion(-0.80459946, -0.09248613, -0.06617775, 0.5828263)
bones/115/rotation = Quaternion(-0.59755445, -0.19428028, -0.42518938, 0.65145826)
bones/116/rotation = Quaternion(-0.4155499, 0.37493637, -0.36610508, 0.7434435)
bones/117/rotation = Quaternion(0.045652855, 0.006272692, -0.13597192, 0.9896404)
bones/126/rotation = Quaternion(3.4702017e-09, -0.0081861485, -2.6245772e-07, 0.99996656)
bones/131/rotation = Quaternion(-0.1932336, 0.52311116, -0.66542125, 0.49621588)
bones/132/rotation = Quaternion(0.04565286, 0.006272684, -0.13597189, 0.9896404)
bones/135/rotation = Quaternion(-0.16598667, 0.49698454, -0.75519216, 0.3938778)
bones/136/rotation = Quaternion(-0.19627976, 0.51285595, 0.11851835, 0.8272886)
bones/136/scale = Vector3(0.9755448, 0.9755449, 0.97554517)
bones/137/rotation = Quaternion(0.4286075, 2.8193805e-08, -1.1986287e-08, 0.90349084)
bones/137/scale = Vector3(1.0019659, 1.0019654, 1.0019658)
bones/138/rotation = Quaternion(-0.42374, 0.35823086, -0.35630083, 0.75177455)
bones/140/rotation = Quaternion(-0.4237399, 0.35823086, -0.3563008, 0.7517746)
bones/141/rotation = Quaternion(-3.6525496e-08, 0.014367501, -6.976657e-08, 0.9998969)
bones/142/rotation = Quaternion(0.044502296, 0.0143706035, -0.13634102, 0.98955756)
bones/146/rotation = Quaternion(-0.08463729, 0.92126185, -0.0741842, -0.37230346)
bones/152/rotation = Quaternion(-0.08463729, 0.92126185, -0.0741842, -0.37230346)
bones/155/rotation = Quaternion(-0.08463778, 0.9212619, -0.074182466, -0.37230358)
bones/161/rotation = Quaternion(-0.08463573, 0.9212615, -0.07418952, -0.37230366)
bones/167/rotation = Quaternion(-0.6005645, -5.459877e-07, 0.79957634, -2.8207197e-07)
bones/170/rotation = Quaternion(-0.08463729, 0.92126185, -0.0741842, -0.37230346)
bones/196/rotation = Quaternion(0.8136647, -1.104078e-09, -0.5813345, 4.974555e-09)
bones/239/rotation = Quaternion(-0.5975545, 0.19428018, 0.4251892, 0.6514584)
bones/240/rotation = Quaternion(-0.41554958, -0.37493682, 0.36610517, 0.7434433)
bones/241/rotation = Quaternion(0.04565284, -0.0062726596, 0.13597193, 0.9896404)
bones/250/rotation = Quaternion(-5.3352775e-08, 0.008186493, 4.5529916e-08, 0.99996656)
bones/255/rotation = Quaternion(-0.19323324, -0.52311146, 0.6654212, 0.49621564)
bones/256/rotation = Quaternion(0.04565283, -0.00627269, 0.13597193, 0.9896404)
bones/259/rotation = Quaternion(-0.18326984, -0.51221615, 0.7220509, 0.42742166)
bones/260/rotation = Quaternion(-0.20860766, -0.51101506, -0.1259282, 0.8243109)
bones/260/scale = Vector3(0.97275114, 0.97275186, 0.97275144)
bones/261/rotation = Quaternion(0.4538394, -1.4646135e-07, 6.060364e-08, 0.89108354)
bones/261/scale = Vector3(1.0020547, 1.0020546, 1.0020545)
bones/262/rotation = Quaternion(-0.42374018, -0.35823098, 0.35630065, 0.75177443)
bones/264/rotation = Quaternion(-0.42374018, -0.3582309, 0.35630065, 0.7517745)
bones/265/rotation = Quaternion(-1.0911658e-08, -0.014367832, 9.3107495e-09, 0.9998968)
bones/266/rotation = Quaternion(0.04450236, -0.014370963, 0.13634107, 0.98955756)
bones/269/rotation = Quaternion(0.010826795, 0.94863695, 0.0012982838, -0.31617895)
bones/305/rotation = Quaternion(0.057122663, 0.9473326, 0.052845538, -0.31065294)
bones/320/rotation = Quaternion(0.8136647, -4.4211562e-10, 0.5813345, -3.258805e-09)
bones/324/rotation = Quaternion(0.09322094, 0.9515697, 0.047891174, -0.2890183)
bones/339/rotation = Quaternion(0.14568368, 4.6548013e-08, 0.98933125, -1.483771e-07)
bones/343/rotation = Quaternion(0.11563276, 0.9633466, 0.050361324, -0.23676187)
bones/362/rotation = Quaternion(0.11563276, 0.9633466, 0.050361324, -0.23676187)
bones/363/rotation = Quaternion(-6.835161e-07, 0.63163733, 0.775264, -4.216876e-07)
bones/365/rotation = Quaternion(-3.1776888e-06, 0.63163733, 0.775264, -2.4559624e-06)
bones/367/rotation = Quaternion(-6.835161e-07, 0.63163733, 0.775264, -4.216876e-07)
bones/368/rotation = Quaternion(-3.1776888e-06, 0.63163733, 0.775264, -2.4559624e-06)
bones/369/rotation = Quaternion(-0.59755445, -0.19428028, -0.42518938, 0.65145826)
bones/370/rotation = Quaternion(-0.5975545, 0.19428018, 0.4251892, 0.6514584)
bones/373/position = Vector3(-0.79583955, -0.1165957, -0.94702774)
bones/373/rotation = Quaternion(-0.39727965, 0.5156278, -0.7121248, 0.2630116)
bones/375/position = Vector3(0.39778277, 1.515721, -0.59870774)
bones/375/rotation = Quaternion(-0.68486106, 0.12678978, -0.0587603, 0.7151482)
bones/378/position = Vector3(0.79583937, -0.11659558, -0.94702804)
bones/378/rotation = Quaternion(-0.39727947, -0.5156279, 0.7121248, 0.26301172)
bones/380/position = Vector3(-0.51043075, 1.510085, -0.5202783)
bones/380/rotation = Quaternion(-0.6758465, -0.06886263, 0.12166987, 0.7236614)
bones/383/position = Vector3(0.074736565, -0.27683595, 0.009947693)
bones/383/rotation = Quaternion(0.0137205925, 0.0013442491, 0.09749699, 0.9951403)
bones/385/rotation = Quaternion(0.011569541, -5.929765e-18, -2.2461695e-18, 0.99993306)
bones/388/rotation = Quaternion(0, 0, -4.3309746e-25, 1)
bones/389/rotation = Quaternion(0.01156954, 2.1186805e-18, -5.3960325e-18, 0.99993306)
bones/390/rotation = Quaternion(0.95949554, 0.00013312203, -0.00045337496, -0.28172383)
bones/392/rotation = Quaternion(0.9561719, 0.0001383515, -0.00045180428, 0.29280585)
bones/394/position = Vector3(-0.24444303, 0.76639116, 1.7135861)
bones/394/rotation = Quaternion(-0.69414407, -0.13032652, -0.12954752, 0.695986)
bones/397/position = Vector3(-0.13154702, 0.31280285, 0)
bones/397/rotation = Quaternion(0, 0, -0.2195138, 0.9756094)
bones/399/rotation = Quaternion(0.0006100897, 2.6953498e-18, -9.620314e-19, 0.9999998)
bones/402/rotation = Quaternion(-0.0007581303, 0, 0, 0.9999997)
bones/403/rotation = Quaternion(0.0013682198, -1.974808e-11, -1.4433399e-08, 0.99999917)
bones/404/rotation = Quaternion(0.95949554, 0.00013327345, -0.00045387793, -0.28172377)
bones/406/rotation = Quaternion(0.9591091, 0.00013386995, -0.00045369827, 0.28303632)
bones/407/rotation = Quaternion(0.0018583633, -0.071086936, 0.9974684, -0.00013244073)
bones/408/position = Vector3(-0.9391452, 0.76639116, 1.4444361)
bones/408/rotation = Quaternion(-0.69414407, -0.13032652, -0.12954752, 0.695986)

[node name="head" parent="rig/Skeleton3D" index="0"]
transform = Transform3D(0.903211, -0.002411413, -0.42918998, 0.062436428, 0.99008435, 0.12583174, 0.42463118, -0.1404497, 0.89440554, -0.03740962, 2.7522864, 0.03662086)

[node name="chest_look_at" type="LookAtModifier3D" parent="rig/Skeleton3D" index="1"]
target_node = NodePath("../../../camera_point")
bone_name = "MCH-spine.003"
bone = 100
forward_axis = 3
primary_rotation_axis = 2
transition_type = 10
use_angle_limitation = true
symmetry_limitation = true
primary_limit_angle = 1.2391838
primary_damp_threshold = 1.0
secondary_limit_angle = 0.9075712
secondary_damp_threshold = 1.0

[node name="chest" type="BoneAttachment3D" parent="rig/Skeleton3D" index="2"]
transform = Transform3D(0.99989843, -0.012657255, -0.0065524913, 0.005591467, -0.07452357, 0.9972035, -0.0131102055, -0.997139, -0.07444526, -0.010799069, 2.2346509, 0.021919519)
bone_name = "MCH-spine.003"
bone_idx = 100

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeStateMachine_6nbey")
anim_player = NodePath("../AnimationPlayer")
parameters/walk/blend_position = Vector2(0, 0.03139019)
parameters/walk/1/TimeScale/scale = 1.0
parameters/walk/2/TimeScale/scale = 1.0
parameters/walk/3/TimeScale/scale = -1.0
parameters/walk/4/TimeScale/scale = -1.0

[node name="camera_point" type="Node3D" parent="." index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.047195256, 2.5761077, -4.5906773)
