[gd_scene load_steps=20 format=3 uid="uid://bfbuqtw1qjq77"]

[ext_resource type="PackedScene" uid="uid://b80vkxdyc415v" path="res://char_models/player_body.blend" id="1_pkeqm"]
[ext_resource type="Script" uid="uid://66lqec4wjkx4" path="res://Scripts/player_animations.gd" id="2_en67s"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_en67s"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8n0mu"]
animation = &"strafe_001"

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_qm4x0"]
graph_offset = Vector2(-353.8, 96.600006)
nodes/strafe/node = SubResource("AnimationNodeAnimation_8n0mu")
nodes/strafe/position = Vector2(-60, 120)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_en67s")
nodes/TimeScale/position = Vector2(120, 100)
node_connections = [&"output", 0, &"TimeScale", &"TimeScale", 0, &"strafe"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_74kp5"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qm4x0"]
animation = &"walk"

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_4d5fo"]
graph_offset = Vector2(-395, 116)
nodes/walk/node = SubResource("AnimationNodeAnimation_qm4x0")
nodes/walk/position = Vector2(-28, 158)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_74kp5")
nodes/TimeScale/position = Vector2(140, 120)
node_connections = [&"output", 0, &"TimeScale", &"TimeScale", 0, &"walk"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_74kp5"]
animation = &"walk"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_cd5m8"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_8n0mu"]
graph_offset = Vector2(-182, 91)
nodes/Animation/node = SubResource("AnimationNodeAnimation_74kp5")
nodes/Animation/position = Vector2(-38, 180)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_cd5m8")
nodes/TimeScale/position = Vector2(120, 120)
node_connections = [&"output", 0, &"TimeScale", &"TimeScale", 0, &"Animation"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_cd5m8"]
animation = &"strafe_001"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_8n0mu"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_k4ijd"]
graph_offset = Vector2(-423, 119)
nodes/Animation/node = SubResource("AnimationNodeAnimation_cd5m8")
nodes/Animation/position = Vector2(-160, 180)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_8n0mu")
nodes/TimeScale/position = Vector2(79, 142)
node_connections = [&"output", 0, &"TimeScale", &"TimeScale", 0, &"Animation"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_en67s"]
animation = &"idle"

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_74kp5"]
graph_offset = Vector2(-252.46643, -42.83589)
nodes/Animation/node = SubResource("AnimationNodeAnimation_en67s")
nodes/Animation/position = Vector2(-120, 100)
node_connections = [&"output", 0, &"Animation"]

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_8n0mu"]
blend_point_0/node = SubResource("AnimationNodeBlendTree_qm4x0")
blend_point_0/pos = Vector2(1, 0)
blend_point_1/node = SubResource("AnimationNodeBlendTree_4d5fo")
blend_point_1/pos = Vector2(0, 1)
blend_point_2/node = SubResource("AnimationNodeBlendTree_8n0mu")
blend_point_2/pos = Vector2(0, -1)
blend_point_3/node = SubResource("AnimationNodeBlendTree_k4ijd")
blend_point_3/pos = Vector2(-1, 0)
blend_point_4/node = SubResource("AnimationNodeBlendTree_74kp5")
blend_point_4/pos = Vector2(0, 0)
sync = true

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_qm4x0"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_6nbey"]
states/End/position = Vector2(523, 100)
states/walk/node = SubResource("AnimationNodeBlendSpace2D_8n0mu")
states/walk/position = Vector2(359, 100)
transitions = ["Start", "walk", SubResource("AnimationNodeStateMachineTransition_qm4x0")]
graph_offset = Vector2(-128, 5)

[node name="player_body" node_paths=PackedStringArray("skeleton", "camera_point", "animation_tree", "chest_tracker") instance=ExtResource("1_pkeqm")]
script = ExtResource("2_en67s")
skeleton = NodePath("rig/Skeleton3D")
camera_point = NodePath("camera_point")
animation_tree = NodePath("AnimationTree")
chest_tracker = NodePath("rig/Skeleton3D/chest")

[node name="rig" parent="." index="0"]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="rig" index="0"]
bones/1/position = Vector3(0.010814533, -0.023017397, 1.5285311)
bones/1/rotation = Quaternion(0.777269, -0.14445186, -0.11192478, 0.60204595)
bones/3/rotation = Quaternion(-0.25441527, 0.062418498, 0.02502847, 0.96475405)
bones/4/rotation = Quaternion(0.07506756, 0.16292234, 0.029095175, 0.9833488)
bones/5/rotation = Quaternion(0.22973429, -0.1147132, 0.0016898874, 0.966468)
bones/7/rotation = Quaternion(-0.1560957, -0.113278836, 0.018158764, 0.98105675)
bones/8/position = Vector3(0.34375232, 0.09213245, 1.959231)
bones/8/rotation = Quaternion(-0.3295407, 0.32050917, -0.18044227, 0.86955017)
bones/8/scale = Vector3(1.0000001, 13.986647, 0.9999999)
bones/9/position = Vector3(-0.3757032, 0.026155315, 1.958266)
bones/9/rotation = Quaternion(-0.27247524, -0.42444345, 0.286382, 0.81461054)
bones/9/scale = Vector3(1.0000001, 13.986643, 0.9999998)
bones/10/position = Vector3(0.13928634, -0.45364082, 0.897995)
bones/10/rotation = Quaternion(0.98345447, -0.14951687, 0.095829666, -0.035757504)
bones/10/scale = Vector3(0.9999999, 16.471855, 0.99999994)
bones/11/position = Vector3(-0.31942827, -0.017625779, 0.84761)
bones/11/rotation = Quaternion(0.9445353, -0.20188448, 0.25754586, 0.027673876)
bones/11/scale = Vector3(0.99999994, 19.39433, 1)
bones/13/position = Vector3(0, -0.0041860244, -0.111864634)
bones/13/rotation = Quaternion(0.00020184084, -7.983213e-06, -0.182739, 0.9831615)
bones/15/rotation = Quaternion(0.007555352, 0.0011423278, 0.22793134, 0.9736473)
bones/26/rotation = Quaternion(0.9471317, 0.0480315, -0.06185081, 0.31114173)
bones/26/scale = Vector3(0.9765993, 0.9765996, 0.9765991)
bones/27/rotation = Quaternion(0.27433696, -3.3235784e-07, 7.21339e-08, 0.9616336)
bones/27/scale = Vector3(0.99972475, 0.99972475, 0.9997249)
bones/28/rotation = Quaternion(-0.5298514, -0.2163026, -0.048377868, 0.8186149)
bones/28/scale = Vector3(1.024244, 1.0242437, 1.0242426)
bones/29/position = Vector3(-1.1748625e-05, 0.2091988, -0.0002553483)
bones/29/rotation = Quaternion(0.0002959222, 0.9770923, -0.21280354, -0.002282092)
bones/33/scale = Vector3(1.0242437, 1.0242435, 1.0242437)
bones/35/rotation = Quaternion(4.058519e-08, -0.11811319, 4.664966e-10, 0.99300015)
bones/35/scale = Vector3(1.0242437, 1.0242435, 1.0242435)
bones/37/scale = Vector3(1.023962, 1.023962, 1.0239618)
bones/38/rotation = Quaternion(6.0843384e-08, -0.003727551, 1.5659204e-08, 0.9999931)
bones/38/scale = Vector3(1.0239619, 1.0239623, 1.023962)
bones/40/rotation = Quaternion(0.98224616, -0.07845776, 0.062185463, 0.1586499)
bones/40/scale = Vector3(0.97949946, 0.97949934, 0.9794992)
bones/41/rotation = Quaternion(0.22741134, 3.114078e-07, -4.659004e-08, 0.9737989)
bones/41/scale = Vector3(0.9997872, 0.9997874, 0.9997873)
bones/42/rotation = Quaternion(-0.6339435, 0.01385624, -0.082393184, 0.7688531)
bones/42/scale = Vector3(1.0211473, 1.0211473, 1.0211465)
bones/43/position = Vector3(5.0263705e-05, 0.20929024, -0.00028361054)
bones/43/rotation = Quaternion(-0.0005023203, 0.9766038, -0.21504183, 0.0013575285)
bones/47/scale = Vector3(1.0211473, 1.0211474, 1.0211475)
bones/49/rotation = Quaternion(3.2153427e-08, 0.007876611, -6.566118e-08, 0.99996907)
bones/49/scale = Vector3(1.021147, 1.0211469, 1.0211465)
bones/51/scale = Vector3(1.0209302, 1.0209303, 1.0209303)
bones/52/rotation = Quaternion(1.3784667e-07, 0.0057911314, -5.2464078e-09, 0.99998325)
bones/52/scale = Vector3(1.0209299, 1.0209302, 1.0209303)
bones/60/rotation = Quaternion(0.00029593316, 0.9770927, -0.21280193, -0.0022821296)
bones/62/rotation = Quaternion(-0.74106586, -0.07907566, 0.012407292, 0.6666443)
bones/63/rotation = Quaternion(-0.13810186, 0.002228707, 0.00031046598, 0.9904155)
bones/63/scale = Vector3(0.97659886, 0.976599, 0.97659886)
bones/64/rotation = Quaternion(0.274337, -3.2617868e-07, 7.136376e-08, 0.9616336)
bones/64/scale = Vector3(0.99972475, 0.9997248, 0.99972486)
bones/65/rotation = Quaternion(0.9466542, 0.045751404, -0.06877376, 0.31148493)
bones/67/rotation = Quaternion(0.9466542, 0.045751445, -0.06877375, 0.31148493)
bones/67/scale = Vector3(1.01191, 0.9765988, 1.011911)
bones/68/rotation = Quaternion(-5.2729924e-08, 0.0035842725, -1.5635855e-10, 0.9999936)
bones/69/rotation = Quaternion(0.27438027, 0.0035666924, -0.000998128, 0.96161413)
bones/69/scale = Vector3(1.0001372, 0.99013114, 1.0103403)
bones/70/rotation = Quaternion(-3.0056096e-08, -0.14847603, 4.9494733e-09, 0.98891604)
bones/71/rotation = Quaternion(-0.53142613, -0.09140099, 0.031408176, 0.8415733)
bones/71/scale = Vector3(0.98943573, 0.99393815, 1.0172877)
bones/72/rotation = Quaternion(0.0003219339, 0.9772218, -0.21220808, -0.0022882407)
bones/72/scale = Vector3(0.99948466, 1.0007659, 0.99974483)
bones/81/rotation = Quaternion(-0.6448023, 0.101023324, 0.011214991, 0.7575609)
bones/82/rotation = Quaternion(-0.11413168, -0.002235539, -0.00025661223, 0.99346316)
bones/82/scale = Vector3(0.9794991, 0.97949904, 0.9794991)
bones/83/rotation = Quaternion(0.22741131, 3.076269e-07, -4.721326e-08, 0.9737988)
bones/83/scale = Vector3(0.9997872, 0.9997873, 0.99978715)
bones/84/rotation = Quaternion(0.98147076, -0.076642424, 0.07341122, 0.15953699)
bones/86/rotation = Quaternion(0.98147064, -0.076642536, 0.07341123, 0.15953699)
bones/86/scale = Vector3(1.0104111, 0.97949934, 1.0104111)
bones/87/rotation = Quaternion(-3.2590886e-09, -0.005639168, 1.1518817e-08, 0.99998415)
bones/88/rotation = Quaternion(0.22745715, -0.0056210994, 0.0012866335, 0.97377104)
bones/88/scale = Vector3(1.0001062, 0.99386233, 1.006375)
bones/89/rotation = Quaternion(-3.4831356e-08, 0.038941823, -1.1435359e-08, 0.99924153)
bones/90/rotation = Quaternion(-0.6306965, -0.016232233, -0.10777633, 0.7683377)
bones/90/scale = Vector3(0.9905662, 0.9901085, 1.0197151)
bones/91/rotation = Quaternion(-0.00061866455, 0.9767493, -0.21437962, 0.0013831691)
bones/91/scale = Vector3(0.99970216, 1.0004345, 0.9998642)
bones/95/rotation = Quaternion(0.0037992175, 0.0005740177, 0.11472407, 0.99339)
bones/97/rotation = Quaternion(0.25832465, -0.057179783, -0.0056440877, 0.964348)
bones/100/rotation = Quaternion(-0.5590512, 0.06539826, 0.09426003, 0.82115763)
bones/102/rotation = Quaternion(0.22973433, -0.11471302, 0.0016898833, 0.96646786)
bones/104/rotation = Quaternion(-0.1560957, -0.11327884, 0.018158767, 0.98105675)
bones/105/rotation = Quaternion(-0.6211548, -0.071840234, -0.08944829, 0.77524495)
bones/107/rotation = Quaternion(-0.79696035, -0.092119195, -0.06838182, 0.5930364)
bones/115/rotation = Quaternion(-0.59193325, -0.19793607, -0.42350844, 0.65656453)
bones/116/rotation = Quaternion(-0.42714056, 0.37683362, -0.3670391, 0.7354113)
bones/117/rotation = Quaternion(0.045628738, 0.0064457986, -0.13972443, 0.98911756)
bones/126/rotation = Quaternion(2.2433775e-09, -0.008413538, -2.6965265e-07, 0.9999646)
bones/131/rotation = Quaternion(-0.20270221, 0.53013355, -0.66259825, 0.48870635)
bones/132/rotation = Quaternion(0.045628738, 0.00644579, -0.1397244, 0.98911756)
bones/135/rotation = Quaternion(-0.17500395, 0.50265974, -0.74708873, 0.39820266)
bones/136/rotation = Quaternion(-0.19781709, 0.5126417, 0.12273439, 0.82644016)
bones/136/scale = Vector3(0.97489244, 0.97489256, 0.9748928)
bones/137/rotation = Quaternion(0.43571544, 2.8106292e-08, -1.4308124e-08, 0.9000845)
bones/137/scale = Vector3(1.002003, 1.0020025, 1.0020028)
bones/138/rotation = Quaternion(-0.43553886, 0.35970947, -0.35699016, 0.74395764)
bones/140/rotation = Quaternion(-0.4355388, 0.35970953, -0.3569901, 0.74395776)
bones/141/rotation = Quaternion(-3.7442092e-08, 0.014766574, -7.107019e-08, 0.999891)
bones/142/rotation = Quaternion(0.044446252, 0.014767153, -0.14010337, 0.9890286)
bones/146/rotation = Quaternion(-0.0846373, 0.92126185, -0.07418418, -0.37230346)
bones/152/rotation = Quaternion(-0.0846373, 0.92126185, -0.07418418, -0.37230346)
bones/155/rotation = Quaternion(-0.08463778, 0.9212619, -0.074182466, -0.37230358)
bones/161/rotation = Quaternion(-0.08463573, 0.9212615, -0.07418952, -0.37230366)
bones/167/rotation = Quaternion(-0.6005645, -5.4699495e-07, 0.79957634, -2.8223303e-07)
bones/170/rotation = Quaternion(-0.0846373, 0.92126185, -0.07418418, -0.37230346)
bones/196/rotation = Quaternion(0.8136647, 3.6416468e-09, -0.58133453, 7.17848e-10)
bones/239/rotation = Quaternion(-0.59193337, 0.19793597, 0.4235083, 0.65656465)
bones/240/rotation = Quaternion(-0.42714027, -0.3768341, 0.3670392, 0.7354111)
bones/241/rotation = Quaternion(0.045628723, -0.006445766, 0.13972445, 0.98911756)
bones/250/rotation = Quaternion(-5.602023e-08, 0.00841389, 4.8451035e-08, 0.9999646)
bones/255/rotation = Quaternion(-0.2027019, -0.53013384, 0.6625982, 0.4887061)
bones/256/rotation = Quaternion(0.04562871, -0.0064457986, 0.13972446, 0.9891176)
bones/259/rotation = Quaternion(-0.19212532, -0.5206077, 0.7105358, 0.43265966)
bones/260/rotation = Quaternion(-0.2085469, -0.51103747, -0.12943892, 0.8237685)
bones/260/scale = Vector3(0.9725001, 0.97250074, 0.9725006)
bones/261/rotation = Quaternion(0.4578089, -1.3511121e-07, 6.847206e-08, 0.8890506)
bones/261/scale = Vector3(1.0020928, 1.0020928, 1.0020927)
bones/262/rotation = Quaternion(-0.43553907, -0.35970962, 0.35699004, 0.7439576)
bones/264/rotation = Quaternion(-0.43553904, -0.35970956, 0.35698998, 0.7439577)
bones/265/rotation = Quaternion(-1.2345323e-08, -0.014766911, 8.963827e-09, 0.999891)
bones/266/rotation = Quaternion(0.04444632, -0.014767522, 0.14010341, 0.9890286)
bones/269/rotation = Quaternion(0.010826795, 0.94863695, 0.0012982832, -0.31617895)
bones/305/rotation = Quaternion(0.05712266, 0.9473326, 0.052845538, -0.31065294)
bones/320/rotation = Quaternion(0.8136647, -2.6151414e-10, 0.5813345, -3.2529577e-09)
bones/324/rotation = Quaternion(0.09322094, 0.9515697, 0.047891174, -0.2890183)
bones/339/rotation = Quaternion(0.14568368, 4.65862e-08, 0.98933125, -1.4817692e-07)
bones/343/rotation = Quaternion(0.11563276, 0.9633466, 0.050361324, -0.23676187)
bones/362/rotation = Quaternion(0.11563276, 0.9633466, 0.050361324, -0.23676187)
bones/363/rotation = Quaternion(-6.8371776e-07, 0.63163733, 0.775264, -4.2146547e-07)
bones/365/rotation = Quaternion(-3.1778036e-06, 0.63163733, 0.775264, -2.4558635e-06)
bones/367/rotation = Quaternion(-6.8371776e-07, 0.63163733, 0.775264, -4.2146547e-07)
bones/368/rotation = Quaternion(-3.1778036e-06, 0.63163733, 0.775264, -2.4558635e-06)
bones/369/rotation = Quaternion(-0.59193325, -0.19793607, -0.42350844, 0.65656453)
bones/370/rotation = Quaternion(-0.59193337, 0.19793597, 0.4235083, 0.65656465)
bones/373/position = Vector3(-0.79583955, -0.1165957, -0.94702774)
bones/373/rotation = Quaternion(-0.3972797, 0.51562786, -0.71212476, 0.26301154)
bones/375/position = Vector3(0.41007513, 1.4901098, -0.5799062)
bones/375/rotation = Quaternion(-0.7004754, 0.12215415, -0.055650175, 0.7009392)
bones/378/position = Vector3(0.79583937, -0.11659558, -0.94702804)
bones/378/rotation = Quaternion(-0.39727947, -0.51562786, 0.7121248, 0.26301163)
bones/380/position = Vector3(-0.52909845, 1.4888488, -0.49288908)
bones/380/rotation = Quaternion(-0.6922804, -0.057946533, 0.121024266, 0.7090439)
bones/383/position = Vector3(0.07681258, -0.3062678, 0.0002123794)
bones/383/rotation = Quaternion(0.00027517692, -2.771381e-05, 0.10020579, 0.99496675)
bones/385/rotation = Quaternion(-0.0005947119, -3.3963697e-19, -1.7641375e-19, 0.9999998)
bones/388/rotation = Quaternion(-0.000594712, -1.0716395e-26, 4.0958197e-27, 0.9999998)
bones/389/rotation = Quaternion(-3.4010128e-11, 7.8852795e-27, -6.992973e-20, 1)
bones/390/rotation = Quaternion(0.9594954, 0.0001331221, -0.00045337487, -0.2817238)
bones/392/rotation = Quaternion(0.9594954, 0.00013311506, -0.00045337467, 0.28172377)
bones/394/position = Vector3(-0.24197823, 0.76685286, 1.7163972)
bones/394/rotation = Quaternion(-0.69505733, -0.12922163, -0.1292103, 0.6953429)
bones/397/position = Vector3(-0.13332127, 0.3358197, 0)
bones/397/rotation = Quaternion(0, 0, -0.22550736, 0.9742415)
bones/399/rotation = Quaternion(0.00229209, -1.6133254e-19, 3.277586e-20, 0.9999974)
bones/403/rotation = Quaternion(0.00229209, 3.4001645e-11, -1.4834301e-08, 0.9999974)
bones/404/rotation = Quaternion(0.95949554, 0.00013327367, -0.00045387796, -0.28172377)
bones/406/rotation = Quaternion(0.95884717, 0.00013428857, -0.00045357444, 0.28392228)
bones/407/rotation = Quaternion(0.0018583633, -0.071086936, 0.9974684, -0.00013244073)
bones/408/position = Vector3(-0.93729305, 0.76685286, 1.4486728)
bones/408/rotation = Quaternion(-0.69505733, -0.12922163, -0.1292103, 0.6953429)

[node name="head" parent="rig/Skeleton3D" index="0"]
transform = Transform3D(0.9014925, -0.0008796842, -0.43279395, 0.040086698, 0.99586856, 0.08147477, 0.43093452, -0.09079808, 0.8978031, -0.033446547, 2.7448878, 0.03761883)

[node name="chest_look_at" type="LookAtModifier3D" parent="rig/Skeleton3D" index="1"]
target_node = NodePath("../../../camera_point")
bone_name = "MCH-spine.003"
bone = 100
forward_axis = 3
primary_rotation_axis = 2
transition_type = 10
use_angle_limitation = true
symmetry_limitation = true
primary_limit_angle = 1.2391838
primary_damp_threshold = 1.0
secondary_limit_angle = 0.9075712
secondary_damp_threshold = 1.0

[node name="chest" type="BoneAttachment3D" parent="rig/Skeleton3D" index="2"]
transform = Transform3D(0.999922, -0.012350827, -0.0019166619, 0.0009767264, -0.07566503, 0.9971329, -0.012460411, -0.99705684, -0.07564703, -0.009494762, 2.2288089, 0.014226913)
bone_name = "MCH-spine.003"
bone_idx = 100

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeStateMachine_6nbey")
anim_player = NodePath("../AnimationPlayer")
parameters/walk/blend_position = Vector2(0, -0.004484296)
parameters/walk/0/TimeScale/scale = 1.0
parameters/walk/1/TimeScale/scale = 1.0
parameters/walk/2/TimeScale/scale = 1.0
parameters/walk/3/TimeScale/scale = -1.0

[node name="camera_point" type="Node3D" parent="." index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.047195256, 2.5761077, -4.5906773)
